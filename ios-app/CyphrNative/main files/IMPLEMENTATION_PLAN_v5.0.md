# üìã –ü–û–õ–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø –°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø v5.0

**–î–æ–∫—É–º–µ–Ω—Ç**: –ü–ª–∞–Ω –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å Cyphr_ID_Enterprise_Methodology_NO_ARGON_v5.0.md
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 22 —Å–µ–Ω—Ç—è–±—Ä—è 2025
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 23 —Å–µ–Ω—Ç—è–±—Ä—è 2025 (–≤–µ—á–µ—Ä)
**–°—Ç–∞—Ç—É—Å (Reality Check 2025‚Äë09‚Äë24)**: 85‚Äì90% –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Auth + Recovery —Ä–∞–±–æ—Ç–∞—é—Ç; –∞–≤—Ç–æ‚Äërebind –ø—Ä–∏ mismatch; —Å—Ç–∞—Ä—Ç–∞–ø‚Äë–æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ 404; UI/QA/–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫—Ä–∞–π–Ω–∏–µ –∫–µ–π—Å—ã –≤ —Ä–∞–±–æ—Ç–µ)
**–û—Ü–µ–Ω–∫–∞**: 5-7 –¥–Ω–µ–π
**–ü–æ—Ç—Ä–∞—á–µ–Ω–æ**: 2 –¥–Ω—è

---

## üéØ –¶–ï–õ–¨
–ü—Ä–∏–≤–µ—Å—Ç–∏ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Cyphr Native –≤ –ø–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π v5.0, –∏—Å–ø—Ä–∞–≤–∏–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ device binding, authentication flow –∏ recovery –ø—Ä–æ—Ü–µ—Å—Å–µ.

## üìä REALITY CHECK (24 Sep)

1) Login/Recovery v5.0 ‚Äî OK: challenge‚Äëresponse, dual‚Äësignature, re‚Äëbind.
2) Device Binding ‚Äî OK: P‚Äë256 in SE, DER(SPKI), SHA256(fingerprint).
3) Startup check ‚Äî OK: –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä 404 –ø–æ @id, –ª–æ–∫–∞–ª—å–Ω–∞—è identity —Å—Ç–∏—Ä–∞–µ—Ç—Å—è.
4) Recovery Phrase ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: Reveal –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç FaceID –∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –∏–∑ Keychain.
5) UI ‚Äî –Ω–µ –ø–æ–∫—Ä—ã—Ç–æ –ø–ª–∞–Ω–æ–º v5.0: —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω (—Å–º. CODEX_files/redesign.md).
6) QA ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≥–æ–Ω –Ω–∞ –¥–µ–≤–∞–π—Å–µ: –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (expired challenge, –ø–æ–¥–ø–∏—Å—å). 

–ù–∏–∂–µ ‚Äî –∏—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∞ (–Ω–µ –∏–∑–º–µ–Ω—è–µ–º), –∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–≤–µ–¥—ë–Ω –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ.

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è (–æ–±–Ω–æ–≤–ª—ë–Ω —Å—Ç–∞—Ç—É—Å):
1. [–ò–°–ü–†–ê–í–õ–ï–ù–û] Device Binding ‚Üí P‚Äë256 Secure Enclave; fingerprint = SHA256(DER(SPKI(pub)))
2. [–ò–°–ü–†–ê–í–õ–ï–ù–û] Single‚ÄëKey (–æ–¥–∏–Ω Ed25519) –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö –∫–ª—é—á–µ–π
3. [–ò–°–ü–†–ê–í–õ–ï–ù–û] 12 —Å–ª–æ–≤ BIP39 (128‚Äëbit entropy)
4. [–ò–°–ü–†–ê–í–õ–ï–ù–û] Challenge‚Äëresponse (login –∏ recovery)
5. [–ò–°–ü–†–ê–í–õ–ï–ù–û] Recovery = re‚Äëbind (–ù–ï –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç)
6. [–ò–°–ü–†–ê–í–õ–ï–ù–û] Keychain –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è: –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–ª–æ—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç EnterpriseKeychainService; legacy wrapper –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

---

## PHASE 1: SECURE ENCLAVE DEVICE BINDING (–ö—Ä–∏—Ç–∏—á–Ω–æ!)
**–°—Ä–æ–∫: 1-2 –¥–Ω—è**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô**
**–°–¢–ê–¢–£–°: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (23 —Å–µ–Ω—Ç—è–±—Ä—è 2025)**

### 1.1 –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π DeviceBindingService ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
```swift
// –ó–∞–º–µ–Ω–∏—Ç —Ç–µ–∫—É—â–∏–π –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π DeviceIdentityService
class DeviceBindingService {
    // P-256 –∫–ª—é—á –≤ Secure Enclave
    func generateDeviceBindingKey() -> SecKey
    // SHA256(DER(publicKey)) –∫–∞–∫ fingerprint
    func getDeviceFingerprintHash() -> String
    // –ü–æ–¥–ø–∏—Å—å challenge –¥–ª—è dual-signature
    func signChallenge(_ challenge: Data) -> Data
}
```

**–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è P-256 –∫–ª—é—á–∞ –≤ Secure Enclave
- `kSecAttrAccessibleWhenUnlockedThisDeviceOnly` –ë–ï–ó `.biometryCurrentSet`
- SHA256(DER(publicKey)) –∫–∞–∫ device_fingerprint_hash
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ iOS

### 1.2 –û–±–Ω–æ–≤–∏—Ç—å CyphrIdentity ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ SecureEnclaveService —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
- ‚úÖ Device binding —á–µ—Ä–µ–∑ SecureEnclaveService —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Backward compatibility —Å legacy fingerprint
**–ß—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç deviceBindingPublicKey –≤ DER(SPKI)
- ‚úÖ –§–∏–Ω–≥–µ—Ä–ø—Ä–∏–Ω—Ç = SHA256(DER(SPKI(pub)))
- ‚ö†Ô∏è Legacy DeviceIdentityService –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–ª–æ—É (–∫ —É–¥–∞–ª–µ–Ω–∏—é –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —á–∏—Å—Ç–∫–µ)

### 1.3 –ò—Å–ø—Ä–∞–≤–∏—Ç—å NetworkService endpoints ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û –í iOS
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getChallenge(cyphrId:)` - –∏–∑–º–µ–Ω–µ–Ω —Å POST –Ω–∞ GET
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `loginCyphrIdentity()` –¥–ª—è dual signatures
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `initiateRecovery()` –∏ `confirmRecovery()` –º–µ—Ç–æ–¥—ã
**–°–µ—Ä–≤–µ—Ä:** ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã v5.0 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã); –∏—Å–ø—Ä–∞–≤–ª–µ–Ω 502; –ø—Ä–æ–≤–µ—Ä–∫–∞ /challenge –∏ /recovery/init

---

## PHASE 2: SINGLE-KEY MODEL + 12 WORDS
**–°—Ä–æ–∫: 1 –¥–µ–Ω—å**
**–°–¢–ê–¢–£–°: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ), –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ/–¥–æ–ª–≥–æ–µ QA**

### 2.1 –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–∏–Ω Ed25519 –∫–ª—é—á ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ P256 –º–µ—Ç–æ–¥—ã –¥–ª—è auth (—Ç–æ–ª—å–∫–æ Ed25519)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û Ed25519 –¥–ª—è auth/recovery
- ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –∏–∑ BIP39 seed

### 2.2 –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 12 —Å–ª–æ–≤ BIP39 ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ CyphrIdentity.generateRecoveryPhrase12Words() —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ entropy: 128 bits –≤–º–µ—Å—Ç–æ 256
- ‚úÖ words: 12 –≤–º–µ—Å—Ç–æ 24
**–ü—Ä–æ–≤–µ—Ä–∫–∞ UI:** ‚úÖ RecoveryPhraseView –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç 12 —Å–ª–æ–≤; BIP39 –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ bundle (2048 —Å–ª–æ–≤)

### 2.3 Recovery = re-binding (–Ω–µ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ Recovery –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–æ—Ç –∂–µ @id (–≤–≤–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ @id)
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–º–µ–Ω—è–µ—Ç device binding –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏

---

## PHASE 3: CHALLENGE-RESPONSE AUTHENTICATION
**–°—Ä–æ–∫: 1 –¥–µ–Ω—å**
**–°–¢–ê–¢–£–°: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (23 —Å–µ–Ω—Ç—è–±—Ä—è 2025)**

### 3.1 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å challenge flow ‚úÖ –í iOS / ‚ùå –ù–ê –°–ï–†–í–ï–†–ï
**iOS –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ AuthenticationService.loginWithCyphrId() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç challenge-response
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω signChallenge() –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ challenge –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ Dual signatures —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (Ed25519 + P256-SE)

**–°–µ—Ä–≤–µ—Ä:**
- ‚úÖ /challenge, /login, /recovery/init, /recovery/confirm ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

### 3.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ FINGERPRINT_MISMATCH ‚ö†Ô∏è –ö–û–î –ì–û–¢–û–í
- ‚úÖ –õ–æ–≥–∏–∫–∞ –≤ AuthenticationService –≥–æ—Ç–æ–≤–∞
- ‚ùå –ù–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑-–∑–∞ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### 3.3 JWT —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ AuthTokenStore –∏—Å–ø–æ–ª—å–∑—É–µ—Ç WhenUnlockedThisDeviceOnly
- ‚úÖ JWT —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–æ–π

---

## PHASE 4: KEYCHAIN –ö–û–ù–°–û–õ–ò–î–ê–¶–ò–Ø
**–°—Ä–æ–∫: 0.5 –¥–Ω—è**

### 4.1 –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ EnterpriseKeychainService
- –£–¥–∞–ª–∏—Ç—å KeychainService wrapper
- –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Enterprise –≤–µ—Ä—Å–∏—é
- –ï–¥–∏–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞

### 4.2 PIN –±–µ–∑ Argon2 (NO-ARGON —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)
```swift
// EnterpriseKeychainService
pinKey = PBKDF2-SHA256(PIN, salt, iterations=50-120ms)
pepperKey = random 32 bytes –≤ Keychain
KEK_pin = HKDF-SHA256(pinKey, pepperKey, "CYPHR-KEK-v1")
dek_pin_wrap = AES-GCM(KEK_pin, DEK)
```

### 4.3 Recovery phrase —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å Face ID
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: `.biometryCurrentSet`

---

## PHASE 5: BACKEND INTEGRATION
**–°—Ä–æ–∫: 1-2 –¥–Ω—è**
**–°–¢–ê–¢–£–°: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (23 —Å–µ–Ω—Ç—è–±—Ä—è 2025)**

### 5.1 Database schema ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ –í—Å–µ v5.0 –∫–æ–ª–æ–Ω–∫–∏ –£–ñ–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î:
  - `device_fingerprint_hash` VARCHAR(64)
  - `device_binding_pub` TEXT
  - `fingerprint_method_ver` SMALLINT
  - `last_seen` TIMESTAMPTZ

### 5.2 API endpoints ‚úÖ –ì–û–¢–û–í–û
**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ POST /api/cyphr-id/register ‚Äî v5.0 –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- ‚úÖ GET /api/cyphr-id/challenge ‚Äî issue nonce + challengeId
- ‚úÖ POST /api/cyphr-id/login ‚Äî dual‚Äësignature + fingerprint check + JWT
- ‚úÖ POST /api/cyphr-id/recovery/init ‚Äî recoveryChallenge
- ‚úÖ POST /api/cyphr-id/recovery/confirm ‚Äî re‚Äëbind + JWT

### 5.3 Migration –ø–µ—Ä–∏–æ–¥ ‚ùå –ù–ï –ù–ê–ß–ê–¢
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö endpoints

---

## PHASE 6: TESTING & QA
**–°—Ä–æ–∫: 1 –¥–µ–Ω—å**
**–°–¢–ê–¢–£–°: ‚ö†Ô∏è QA –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ (unit/integration –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é)**

### 6.1 Unit tests ‚ùå –ù–ï –°–î–ï–õ–ê–ù–û
- ‚úÖ Device binding/Challenge/Recovery ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π E2E —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω
- ‚úÖ iOS —Ñ–ª–æ—É –æ–±–Ω–æ–≤–ª—ë–Ω –∏ –≥–æ—Ç–æ–≤; on‚Äëdevice E2E ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω –∫–∞–∫ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ UX
- ‚úÖ PIN rate limiting ‚Äî –±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –≤ EnterpriseKeychainService

### 6.2 Integration tests ‚ùå –ù–ï –°–î–ï–õ–ê–ù–û
- ‚úÖ –°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤; –ø—Ä–æ–π–¥–µ–Ω synthetic E2E
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç v5.0; on‚Äëdevice E2E ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–∞—è UX‚Äë–ø—Ä–æ–≤–µ—Ä–∫–∞

### 6.3 Performance targets ‚ùå –ù–ï –ò–ó–ú–ï–†–ï–ù–û
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìà –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (Definition of Done):
- [‚úÖ] Device Binding v2 —á–µ—Ä–µ–∑ Secure Enclave (DER/SPKI + SHA256)
- [‚úÖ] Single‚ÄëKey (–æ–¥–∏–Ω Ed25519)
- [‚úÖ] 12 —Å–ª–æ–≤ BIP39
- [‚úÖ] Challenge‚Äëresponse login/recovery (—Å–µ—Ä–≤–µ—Ä/–∫–ª–∏–µ–Ω—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
- [‚úÖ] Recovery = re‚Äëbind
- [‚úÖ] –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ–ª–æ—É –≥–æ—Ç–æ–≤ (on‚Äëdevice E2E ‚Äî check UX)

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ:
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] Graceful fallback –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –±–µ–∑ SE
- [ ] Offline mode —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º JWT

---

## ‚ö†Ô∏è –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| –ü–æ—Ç–µ—Ä—è –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ | –°—Ä–µ–¥–Ω—è—è | –ö—Ä–∏—Ç–∏—á–Ω–æ | Backup —Å—Ç–∞—Ä—ã—Ö –∫–ª—é—á–µ–π –Ω–∞ 30 –¥–Ω–µ–π |
| SE –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ | Fallback –Ω–∞ –æ–±—ã—á–Ω—ã–π Keychain |
| Backend –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ø–∞–¥—ë—Ç | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |

---

## üöÄ –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø (—Ñ–∞–∫—Ç)

**–î–µ–Ω—å 1-2:** Phase 1 ‚Äî ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (SE‚Äëbinding + DER/SPKI)
**–î–µ–Ω—å 3:** Phase 2 ‚Äî ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Single‚ÄëKey + 12 —Å–ª–æ–≤)
**–î–µ–Ω—å 4:** Phase 3 ‚Äî ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Challenge‚ÄëResponse)
**–î–µ–Ω—å 5:** Phase 5 ‚Äî ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è + —Å–µ—Ä–≤–µ—Ä–Ω—ã–π E2E)
**–î–µ–Ω—å 6:** Phase 4 ‚Äî ‚ö†Ô∏è –í –ø—Ä–æ—Ü–µ—Å—Å–µ (Keychain/Face ID –ø–æ–ª–∏—Ä–æ–≤–∫–∞)
**–î–µ–Ω—å 7:** Phase 6 ‚Äî ‚ö†Ô∏è iOS E2E –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π QA

---

## üìä **–†–ï–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–° –ù–ê 24 –°–ï–ù–¢–Ø–ë–†–Ø 2025:**

### **–ß–¢–û –†–ï–ê–õ–¨–ù–û –í–´–ü–û–õ–ù–ï–ù–û:**
1. **iOS –∫–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω** –ø–æ–¥ v5.0 (Register/Login/Recovery, DER/SPKI, challengeId)
2. **–°–µ—Ä–≤–µ—Ä –∏ –ë–î** –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ v5.0; –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
3. **–°–µ—Ä–≤–µ—Ä–Ω—ã–π E2E** (register‚Üílogin dual‚Üímismatch‚Üírecovery‚Üílogin) ‚Äî –ø—Ä–æ–π–¥–µ–Ω; –¥–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ‚Äërebind –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–õ–û–ö–ï–†–´:**
‚Ä¢ –û—Å—Ç–∞–ª–∏—Å—å: –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã (expired/malformed), –ø–æ–∫—Ä—ã—Ç–∏–µ unit/integration, —Ñ–∏–Ω–∞–ª—å–Ω—ã–π QA.

### **–†–ï–ê–õ–¨–ù–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨: ~85‚Äì90% –ø–æ v5.0**
